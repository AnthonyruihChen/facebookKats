
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>kats.detectors.stat_sig_detector module &#8212; Kats 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="kats.detectors.trend_mk module" href="kats.detectors.trend_mk.html" />
    <link rel="prev" title="kats.detectors.seasonality module" href="kats.detectors.seasonality.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-kats.detectors.stat_sig_detector">
<span id="kats-detectors-stat-sig-detector-module"></span><h1>kats.detectors.stat_sig_detector module<a class="headerlink" href="#module-kats.detectors.stat_sig_detector" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.MultiStatSigDetectorModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">kats.detectors.stat_sig_detector.</span></span><span class="sig-name descname"><span class="pre">MultiStatSigDetectorModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_control</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_test</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serialized_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)"><span class="pre">bytes</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_unit</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'fdr_bh'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/kats/detectors/stat_sig_detector.html#MultiStatSigDetectorModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.detectors.stat_sig_detector.MultiStatSigDetectorModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#kats.detectors.stat_sig_detector.StatSigDetectorModel" title="kats.detectors.stat_sig_detector.StatSigDetectorModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">kats.detectors.stat_sig_detector.StatSigDetectorModel</span></code></a></p>
<p>MultiStatSigDetectorModel is a multivariate version of the StatSigDetector.  It applies a univariate
t-test to each of the components of the multivariate time series to see if the means between the control
and test periods are significantly different.  Then it uses a false discovery rate controlling procedure
rate (FDR) controlling procedure (<a class="reference external" href="https://en.wikipedia.org/wiki/False_discovery_rate#Controlling_procedure">https://en.wikipedia.org/wiki/False_discovery_rate#Controlling_procedure</a>)
to adjust the p-values, reducing the noise the the alerts that are triggered by the detector.  The default
FDR controlling procedure is the Benjamini-Hochberg procedure, but this can be adjusted when initializing
the model.</p>
<p>Like with the StatSigDetector, we start with the history data, and then as for the current data,
we apply a rolling window, adding one data point at a time from the current data,
and detecting significant change. The T-statistics we return here are based on the adjusted p-values
from the FDR controlling procedure.</p>
<p>We suggest using n_control &gt;= 30 to get good estimates</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.MultiStatSigDetectorModel.n_control">
<span class="sig-name descname"><span class="pre">n_control</span></span><a class="headerlink" href="#kats.detectors.stat_sig_detector.MultiStatSigDetectorModel.n_control" title="Permalink to this definition">¶</a></dt>
<dd><p>int, number of data points(or time units) of history to compare with</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.MultiStatSigDetectorModel.n_test">
<span class="sig-name descname"><span class="pre">n_test</span></span><a class="headerlink" href="#kats.detectors.stat_sig_detector.MultiStatSigDetectorModel.n_test" title="Permalink to this definition">¶</a></dt>
<dd><p>int, number of points(or time_units) to compare the history with</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.MultiStatSigDetectorModel.serialized_model">
<span class="sig-name descname"><span class="pre">serialized_model</span></span><a class="headerlink" href="#kats.detectors.stat_sig_detector.MultiStatSigDetectorModel.serialized_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional, serialized json containing the parameters</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.MultiStatSigDetectorModel.time_units">
<span class="sig-name descname"><span class="pre">time_units</span></span><a class="headerlink" href="#kats.detectors.stat_sig_detector.MultiStatSigDetectorModel.time_units" title="Permalink to this definition">¶</a></dt>
<dd><p>str, units of time used to measure the intervals. If not provided
we infer it from the provided data</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.MultiStatSigDetectorModel.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#kats.detectors.stat_sig_detector.MultiStatSigDetectorModel.method" title="Permalink to this definition">¶</a></dt>
<dd><p>str, indicates the FDR controlling method used for adjusting the p-values.
Defaults to ‘fdr_bh’ for Benjamini-Hochberg.  Inputs for other FDR controlling methods
can be found at <a class="reference external" href="https://www.statsmodels.org/dev/generated/statsmodels.stats.multitest.multipletests.html">https://www.statsmodels.org/dev/generated/statsmodels.stats.multitest.multipletests.html</a></p>
</dd></dl>

<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Example usage:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># history and ts_pt are TimeSeriesData objects and history is larger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># than (n_control + n_test) so that we have sufficient history to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># run the detector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_control</span> <span class="o">=</span> <span class="mi">28</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_test</span> <span class="o">=</span> <span class="mi">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">random</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">control_time</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="p">(</span><span class="n">n_control</span> <span class="o">+</span> <span class="n">n_test</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_time</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2018-02-05&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="n">n_test</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">num_seq</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">control_val</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">control_time</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_seq</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_val</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">test_time</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_seq</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hist_ts</span> <span class="o">=</span>
<span class="go">    TimeSeriesData(</span>
<span class="go">        pd.DataFrame(</span>
<span class="go">            {</span>
<span class="go">                **{&quot;time&quot;: control_time},</span>
<span class="go">                **{f&quot;ts_{i}&quot;: control_val[i] for i in range(num_seq)},</span>
<span class="go">            }</span>
<span class="go">        )</span>
<span class="go">    )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_ts</span> <span class="o">=</span>
<span class="go">    TimeSeriesData(</span>
<span class="go">        pd.DataFrame(</span>
<span class="go">            {</span>
<span class="go">                **{&quot;time&quot;: test_time},</span>
<span class="go">                **{f&quot;ts_{i}&quot;: test_val[i] for i in range(num_seq)},</span>
<span class="go">            }</span>
<span class="go">        )</span>
<span class="go">    )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ss_detect</span> <span class="o">=</span> <span class="n">MultiStatSigDetectorModel</span><span class="p">(</span><span class="n">n_control</span><span class="o">=</span><span class="n">n_control</span><span class="p">,</span> <span class="n">n_test</span><span class="o">=</span><span class="n">n_test</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">anom</span> <span class="o">=</span> <span class="n">ss_detect</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data_ts</span><span class="p">,</span> <span class="n">historical_data</span><span class="o">=</span><span class="n">hist_ts</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.MultiStatSigDetectorModel.fit_predict">
<span class="sig-name descname"><span class="pre">fit_predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesData" title="kats.consts.TimeSeriesData"><span class="pre">kats.consts.TimeSeriesData</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">historical_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesData" title="kats.consts.TimeSeriesData"><span class="pre">kats.consts.TimeSeriesData</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">kats.detectors.detector_consts.AnomalyResponse</span><a class="reference internal" href="_modules/kats/detectors/stat_sig_detector.html#MultiStatSigDetectorModel.fit_predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.detectors.stat_sig_detector.MultiStatSigDetectorModel.fit_predict" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the main working function.
The function returns an AnomalyResponse object of length
equal to the length of the data
We require len(historical_data) &gt; (n_control + n_test)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – TimeSeriesData, A multivariate TimeSeriesData for which we are running the MultiStatSigDetectorModel</p></li>
<li><p><strong>historical_data</strong> – Optional[TimeSeriesData] Historical data used to do detection for initial points in data</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.StatSigDetectorModel">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">kats.detectors.stat_sig_detector.</span></span><span class="sig-name descname"><span class="pre">StatSigDetectorModel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_control</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_test</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serialized_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)"><span class="pre">bytes</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_unit</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/kats/detectors/stat_sig_detector.html#StatSigDetectorModel"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.detectors.stat_sig_detector.StatSigDetectorModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="kats.detectors.detector.html#kats.detectors.detector.DetectorModel" title="kats.detectors.detector.DetectorModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">kats.detectors.detector.DetectorModel</span></code></a></p>
<p>StatSigDetectorModel is a simple detector, which compares a control and test period.
The detector assumes that the time series data comes from a iid normal distribution,
and applies a t-test to check if the means between the control and test period are
significantly different.</p>
<p>We start with the history data, and then as for the current data, we apply a rolling
window, adding one data point at a time from the current data, and detecting significant
change. We return the t-statistic as a score, which reflects the severity of the
change.
We suggest using n_control &gt;= 30 to get good estimates</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.StatSigDetectorModel.n_control">
<span class="sig-name descname"><span class="pre">n_control</span></span><a class="headerlink" href="#kats.detectors.stat_sig_detector.StatSigDetectorModel.n_control" title="Permalink to this definition">¶</a></dt>
<dd><p>number of data points(or time units) of history to compare with</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.StatSigDetectorModel.n_test">
<span class="sig-name descname"><span class="pre">n_test</span></span><a class="headerlink" href="#kats.detectors.stat_sig_detector.StatSigDetectorModel.n_test" title="Permalink to this definition">¶</a></dt>
<dd><p>number of points(or time_units) to compare the history with</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.StatSigDetectorModel.serialized_model">
<span class="sig-name descname"><span class="pre">serialized_model</span></span><a class="headerlink" href="#kats.detectors.stat_sig_detector.StatSigDetectorModel.serialized_model" title="Permalink to this definition">¶</a></dt>
<dd><p>serialized json containing the parameters</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.StatSigDetectorModel.time_units">
<span class="sig-name descname"><span class="pre">time_units</span></span><a class="headerlink" href="#kats.detectors.stat_sig_detector.StatSigDetectorModel.time_units" title="Permalink to this definition">¶</a></dt>
<dd><p>units of time used to measure the intervals. If not provided
we infer it from the provided data.</p>
</dd></dl>

<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Example usage:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># history and ts_pt are TimeSeriesData objects and history is larger</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># than (n_control + n_test) so that we have sufficient history to</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># run the detector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_control</span> <span class="o">=</span> <span class="mi">28</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_test</span> <span class="o">=</span> <span class="mi">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">random</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">control_time</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2018-01-01&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="p">(</span><span class="n">n_control</span> <span class="o">+</span> <span class="n">n_test</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_time</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">date_range</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="s1">&#39;2018-02-05&#39;</span><span class="p">,</span> <span class="n">freq</span><span class="o">=</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="n">periods</span><span class="o">=</span><span class="n">n_test</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">control_val</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">normalvariate</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_control</span> <span class="o">+</span> <span class="n">n_test</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test_val</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">normalvariate</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_test</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hist_ts</span> <span class="o">=</span> <span class="n">TimeSeriesData</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">control_time</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">control_val</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_ts</span> <span class="o">=</span> <span class="n">TimeSeriesData</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">test_time</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">test_val</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ss_detect</span> <span class="o">=</span> <span class="n">StatSigDetectorModel</span><span class="p">(</span><span class="n">n_control</span><span class="o">=</span><span class="n">n_control</span><span class="p">,</span> <span class="n">n_test</span><span class="o">=</span><span class="n">n_test</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">anom</span> <span class="o">=</span> <span class="n">ss_detect</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data_ts</span><span class="p">,</span> <span class="n">historical_data</span><span class="o">=</span><span class="n">hist_ts</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.StatSigDetectorModel.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesData" title="kats.consts.TimeSeriesData"><span class="pre">kats.consts.TimeSeriesData</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">historical_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesData" title="kats.consts.TimeSeriesData"><span class="pre">kats.consts.TimeSeriesData</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/kats/detectors/stat_sig_detector.html#StatSigDetectorModel.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.detectors.stat_sig_detector.StatSigDetectorModel.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit can be called during priming. It’s a noop for us.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.StatSigDetectorModel.fit_predict">
<span class="sig-name descname"><span class="pre">fit_predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesData" title="kats.consts.TimeSeriesData"><span class="pre">kats.consts.TimeSeriesData</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">historical_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesData" title="kats.consts.TimeSeriesData"><span class="pre">kats.consts.TimeSeriesData</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">kats.detectors.detector_consts.AnomalyResponse</span><a class="reference internal" href="_modules/kats/detectors/stat_sig_detector.html#StatSigDetectorModel.fit_predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.detectors.stat_sig_detector.StatSigDetectorModel.fit_predict" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the main working function.
The function returns an AnomalyResponse object of length
equal to the length of the data.
We require len(historical_data) &gt; (n_control + n_test).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – TimeSeriesData, A univariate TimeSeriesData for which we are running the StatSigDetectorModel</p></li>
<li><p><strong>historical_data</strong> – Optional[TimeSeriesData] Historical data used to do detection for initial points in data</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.StatSigDetectorModel.predict">
<span class="sig-name descname"><span class="pre">predict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesData" title="kats.consts.TimeSeriesData"><span class="pre">kats.consts.TimeSeriesData</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">historical_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesData" title="kats.consts.TimeSeriesData"><span class="pre">kats.consts.TimeSeriesData</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">kats.detectors.detector_consts.AnomalyResponse</span><a class="reference internal" href="_modules/kats/detectors/stat_sig_detector.html#StatSigDetectorModel.predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.detectors.stat_sig_detector.StatSigDetectorModel.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict is not implemented.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.StatSigDetectorModel.serialize">
<span class="sig-name descname"><span class="pre">serialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.9)"><span class="pre">bytes</span></a><a class="reference internal" href="_modules/kats/detectors/stat_sig_detector.html#StatSigDetectorModel.serialize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.detectors.stat_sig_detector.StatSigDetectorModel.serialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Serializes by putting model parameters in a json</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.StatSigDetectorModel.visualize">
<span class="sig-name descname"><span class="pre">visualize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/kats/detectors/stat_sig_detector.html#StatSigDetectorModel.visualize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.detectors.stat_sig_detector.StatSigDetectorModel.visualize" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to visualize the result of the StatSigDetectorModel.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="kats.detectors.stat_sig_detector.to_datetime">
<span class="sig-prename descclassname"><span class="pre">kats.detectors.stat_sig_detector.</span></span><span class="sig-name descname"><span class="pre">to_datetime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.datetime64</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.9)"><span class="pre">datetime.datetime</span></a><a class="reference internal" href="_modules/kats/detectors/stat_sig_detector.html#to_datetime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.detectors.stat_sig_detector.to_datetime" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to convert from np.datetime64 which
is used by pandas pd.to_datetime to datetime in datetime
library</p>
</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Kats</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="kats.consts.html">kats.consts module</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="kats.detectors.html">kats.detectors package</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.bocpd.html">kats.detectors.bocpd module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.bocpd_model.html">kats.detectors.bocpd_model module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.changepoint_evaluator.html">kats.detectors.changepoint_evaluator module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.cusum_detection.html">kats.detectors.cusum_detection module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.cusum_model.html">kats.detectors.cusum_model module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.detector.html">kats.detectors.detector module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.detector_consts.html">kats.detectors.detector_consts module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.hourly_ratio_detection.html">kats.detectors.hourly_ratio_detection module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.outlier.html">kats.detectors.outlier module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.prophet_detector.html">kats.detectors.prophet_detector module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.residual_translation.html">kats.detectors.residual_translation module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.robust_stat_detection.html">kats.detectors.robust_stat_detection module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.seasonality.html">kats.detectors.seasonality module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">kats.detectors.stat_sig_detector module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.trend_mk.html">kats.detectors.trend_mk module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.html#module-kats.detectors">kats.detectors module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="kats.graphics.html">kats.graphics package</a></li>
<li class="toctree-l1"><a class="reference internal" href="kats.models.html">kats.models package</a></li>
<li class="toctree-l1"><a class="reference internal" href="kats.tsfeatures.html">kats.tsfeatures package</a></li>
<li class="toctree-l1"><a class="reference internal" href="kats.utils.html">kats.utils package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="kats.detectors.html">kats.detectors package</a><ul>
      <li>Previous: <a href="kats.detectors.seasonality.html" title="previous chapter">kats.detectors.seasonality module</a></li>
      <li>Next: <a href="kats.detectors.trend_mk.html" title="next chapter">kats.detectors.trend_mk module</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      
      
      
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/kats.detectors.stat_sig_detector.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>