
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>kats.models.metalearner.metalearner_modelselect module &#8212; Kats 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="kats.models.metalearner.metalearner_predictability module" href="kats.models.metalearner.metalearner_predictability.html" />
    <link rel="prev" title="kats.models.metalearner.metalearner_hpt module" href="kats.models.metalearner.metalearner_hpt.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-kats.models.metalearner.metalearner_modelselect">
<span id="kats-models-metalearner-metalearner-modelselect-module"></span><h1>kats.models.metalearner.metalearner_modelselect module<a class="headerlink" href="#module-kats.models.metalearner.metalearner_modelselect" title="Permalink to this headline">¶</a></h1>
<p>A module for meta-learner model selection.</p>
<dl class="simple">
<dt>This module contains:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="#kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect" title="kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect"><code class="xref py py-class docutils literal notranslate"><span class="pre">MetaLearnModelSelect</span></code></a> for meta-learner models selection, which recommends the forecasting model based on time series or time series features;</p></li>
<li><p><a class="reference internal" href="#kats.models.metalearner.metalearner_modelselect.RandomDownSampler" title="kats.models.metalearner.metalearner_modelselect.RandomDownSampler"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandomDownSampler</span></code></a> for creating balanced dataset via downsampling.</p></li>
</ul>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">kats.models.metalearner.metalearner_modelselect.</span></span><span class="sig-name descname"><span class="pre">MetaLearnModelSelect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">metadata</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">load_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#MetaLearnModelSelect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Meta-learner framework on forecasting model selection.
This framework uses classification algorithms to recommend suitable forecasting models.
For training, it uses time series features as inputs and the best forecasting models as labels.
For prediction, it takes time series or time series features as inputs to predict the most suitable forecasting model.
The class provides count_category, preprocess, plot_feature_comparison, get_corr_mtx, plot_corr_heatmap, train, pred, pred_by_feature, pred_fuzzy, load_model and save_model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.metadata">
<span class="sig-name descname"><span class="pre">metadata</span></span><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional; A list of dictionaries representing the meta-data of time series (e.g., the meta-data generated by GetMetaData object).
Each dictionary d must contain at least 3 components: ‘hpt_res’, ‘features’ and ‘best_model’. d[‘hpt_res’] represents the best hyper-parameters for each candidate model and the corresponding errors;
d[‘features’] are time series features, and d[‘best_model’] is a string representing the best candidate model of the corresponding time series data.
metadata should not be None unless load_model is True. Default is None.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.load_model">
<span class="sig-name descname"><span class="pre">load_model</span></span><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#MetaLearnModelSelect.load_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.load_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional; A boolean to specify whether or not to load a trained model. Default is False.</p>
</dd></dl>

<dl>
<dt>Sample Usage:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mlms</span> <span class="o">=</span> <span class="n">MetaLearnModelSelect</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlms</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">n_trees</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">eval_method</span><span class="o">=</span><span class="s1">&#39;mean&#39;</span><span class="p">)</span> <span class="c1"># Train a meta-learner model selection model.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlms</span><span class="o">.</span><span class="n">pred</span><span class="p">(</span><span class="n">TSdata</span><span class="p">)</span> <span class="c1"># Predict/recommend forecasting model for a new time series data.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlms2</span><span class="o">.</span><span class="n">pred</span><span class="p">(</span><span class="n">TSdata</span><span class="p">,</span> <span class="n">n_top</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># Predict/recommend the top 3 most suitable forecasting model.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlms</span><span class="o">.</span><span class="n">save_model</span><span class="p">(</span><span class="s2">&quot;mlms.pkl&quot;</span><span class="p">)</span> <span class="c1"># Save the trained model.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlms2</span> <span class="o">=</span> <span class="n">MetaLearnModelSelect</span><span class="p">(</span><span class="n">metadata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">load_model</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># Create a new object and then load a pre-trained model.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlms2</span><span class="o">.</span><span class="n">load_model</span><span class="p">(</span><span class="s2">&quot;mlms.pkl&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.count_category">
<span class="sig-name descname"><span class="pre">count_category</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#MetaLearnModelSelect.count_category"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.count_category" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of observations of each candidate model in meta-data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dictionary storing the number of observations of each candidate model in meta-data.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.get_corr_mtx">
<span class="sig-name descname"><span class="pre">get_corr_mtx</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">pandas.core.frame.DataFrame</span><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#MetaLearnModelSelect.get_corr_mtx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.get_corr_mtx" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate correlation matrix of feature matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A pd.DataFrame representing the correlation matrix of time series features.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id0">
<span class="sig-name descname"><span class="pre">load_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#MetaLearnModelSelect.load_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a pre-trained model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_name</strong> – A string representing the path to load the pre-trained model.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.plot_corr_heatmap">
<span class="sig-name descname"><span class="pre">plot_corr_heatmap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">camp</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'RdBu_r'</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#MetaLearnModelSelect.plot_corr_heatmap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.plot_corr_heatmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate heat-map for correlation matrix of feature matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>camp</strong> – Optional; A string representing the olor bar used to generate heat-map. Default is “RdBu_r”.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.plot_feature_comparison">
<span class="sig-name descname"><span class="pre">plot_feature_comparison</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">j</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#MetaLearnModelSelect.plot_feature_comparison"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.plot_feature_comparison" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the time series features comparison plot.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong> – A integer representing the index of one feature vector from feature matrix to be compared.</p></li>
<li><p><strong>j</strong> – A integer representing the other index of one feature vector from feature matrix to be compared.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.pred">
<span class="sig-name descname"><span class="pre">pred</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_ts</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesData" title="kats.consts.TimeSeriesData"><span class="pre">kats.consts.TimeSeriesData</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ts_scale</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_top</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#MetaLearnModelSelect.pred"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.pred" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict the best forecasting model for a new time series data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_ts</strong> – <a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesData" title="kats.consts.TimeSeriesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">kats.consts.TimeSeriesData</span></code></a> object representing the new time series data.</p></li>
<li><p><strong>ts_scale</strong> – Optional; A boolean to specify whether or not to rescale time series data (i.e., normalizing it with its maximum vlaue) before calculating features. Default is True.</p></li>
<li><p><strong>n_top</strong> – Optional; A integer for the number of top model names to return. Default is 1.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string or a list of strings of the names of forecasting models.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.pred_by_feature">
<span class="sig-name descname"><span class="pre">pred_by_feature</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_x</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_top</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#MetaLearnModelSelect.pred_by_feature"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.pred_by_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict the best forecasting models given a list/dataframe of time series features
:param source_x: the time series features of the time series that one wants to predict, can be a np.ndarray, a list of np.ndarray or a pd.DataFrame.
:param n_top: Optional; An integer for the number of top model names to return. Default is 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An array of strings representing the forecasing models. If n_top=1, a 1-d np.ndarray will be returned. Otherwise, a 2-d np.ndarray will be returned.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.pred_fuzzy">
<span class="sig-name descname"><span class="pre">pred_fuzzy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_ts</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesData" title="kats.consts.TimeSeriesData"><span class="pre">kats.consts.TimeSeriesData</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">ts_scale</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sig_level</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0.2</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#MetaLearnModelSelect.pred_fuzzy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.pred_fuzzy" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict a forecasting model for a new time series data using fuzzy method.</p>
<p>The fuzzy method returns the best candiate model and the second best model will be returned if there is no statistically significant difference between them.
The statistical test is based on the bootstrapping samples drawn from the fitted random forest model. This function is only available for random forest classifier.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>source_ts</strong> – <a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesData" title="kats.consts.TimeSeriesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">kats.consts.TimeSeriesData</span></code></a> object representing the new time series data.</p></li>
<li><p><strong>ts_scale</strong> – Optional; A boolean to specify whether or not to rescale time series data (i.e., normalizing it with its maximum vlaue) before calculating features. Default is True.</p></li>
<li><p><strong>sig_level</strong> – Optional; A float representing the significance level for bootstrap test. If pvalue&gt;=sig_level, then we deem there is no difference between the best and the second best model.
Default is 0.2.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary of prediction results, including forecasting models, their probability of being th best forecasting models and the pvalues of bootstrap tests.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.preprocess">
<span class="sig-name descname"><span class="pre">preprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">downsample</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><span class="pre">bool</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#MetaLearnModelSelect.preprocess"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.preprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Pre-process meta data before training a classifier.</p>
<p>There are 2 options in this function: 1) whether or not to downsample meta-data to ensure each candidate model has the same number of observations;
and 2) whether or not to rescale the time series features to zero-mean and unit-variance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>downsample</strong> – Optional; A boolean to specify whether or not to downsample meta-data to ensure each candidate model has the same number of observations.
Default is True.</p></li>
<li><p><strong>scale</strong> – Optional; A boolean to specify whether or not to rescale the time series features to zero-mean and unit-variance.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.save_model">
<span class="sig-name descname"><span class="pre">save_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#MetaLearnModelSelect.save_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.save_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the trained model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file_name</strong> – A string representing the path to save the trained model.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'RandomForest'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_method</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'mean'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><span class="pre">float</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_trees</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_neighbors</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#MetaLearnModelSelect.train"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.MetaLearnModelSelect.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Train a meta-learner model selection model (i.e., a classifier).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>method</strong> – Optional; A string representing the name of the classification algorithm. Can be ‘RandomForest’, ‘GBDT’, ‘SVM’, ‘KNN’ or ‘NaiveBayes’. Default is ‘RandomForest’.</p></li>
<li><p><strong>eval_method</strong> – Optional; A string representing the aggregation method used for computing errors. Can be ‘mean’ or ‘median’. Default is ‘mean’.</p></li>
<li><p><strong>test_size</strong> – Optional; A float representing the proportion of test set, which should be within (0, 1). Default is 0.1.</p></li>
<li><p><strong>n_trees</strong> – Optional; An integer representing the number of trees in random forest model. Default is 500.</p></li>
<li><p><strong>n_neighbors</strong> – Optional; An integer representing the number of neighbors in KNN model. Default is 5.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dictionary summarizing the performance of the trained classifier on both training and validation set.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.RandomDownSampler">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">kats.models.metalearner.metalearner_modelselect.</span></span><span class="sig-name descname"><span class="pre">RandomDownSampler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hpt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataX</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dataY</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.series.Series</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#RandomDownSampler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.RandomDownSampler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>An assistant class for class MetaLearnModelSelect to do random downsampling.</p>
<p>RandomDownSampler provides methods for creating a balanced dataset via downsampling. It contains fit_resample.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.RandomDownSampler.hpt">
<span class="sig-name descname"><span class="pre">hpt</span></span><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.RandomDownSampler.hpt" title="Permalink to this definition">¶</a></dt>
<dd><p>A <cite>pandas.Series</cite> object storing the best hyper-parameters and the corresponding errors for each model.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.RandomDownSampler.dataX">
<span class="sig-name descname"><span class="pre">dataX</span></span><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.RandomDownSampler.dataX" title="Permalink to this definition">¶</a></dt>
<dd><p>A <cite>pandas.DataFrame</cite> object representing the time series features matrix.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.RandomDownSampler.dataY">
<span class="sig-name descname"><span class="pre">dataY</span></span><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.RandomDownSampler.dataY" title="Permalink to this definition">¶</a></dt>
<dd><p>A <cite>pandas.Series</cite> object representing the best models for the corresponding time series.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.models.metalearner.metalearner_modelselect.RandomDownSampler.fit_resample">
<span class="sig-name descname"><span class="pre">fit_resample</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.series.Series</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.series.Series</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/kats/models/metalearner/metalearner_modelselect.html#RandomDownSampler.fit_resample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.models.metalearner.metalearner_modelselect.RandomDownSampler.fit_resample" title="Permalink to this definition">¶</a></dt>
<dd><p>Create balanced dataset via random downsampling.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A tuple containing the <cite>pandas.Series</cite> object of the best hyper-parameters and the corresponding errors, the <cite>pandas.DataFrame</cite> object of the downsampled time series features,
and the <cite>pandas.Series</cite> object of the downsampled best models for the corresponding time series.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Kats</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="kats.consts.html">kats.consts module</a></li>
<li class="toctree-l1"><a class="reference internal" href="kats.detectors.html">kats.detectors package</a></li>
<li class="toctree-l1"><a class="reference internal" href="kats.graphics.html">kats.graphics package</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="kats.models.html">kats.models package</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="kats.models.arima.html">kats.models.arima module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.bayesian_var.html">kats.models.bayesian_var module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.ensemble.html">kats.models.ensemble package</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.harmonic_regression.html">kats.models.harmonic_regression module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.holtwinters.html">kats.models.holtwinters module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.linear_model.html">kats.models.linear_model module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.lstm.html">kats.models.lstm module</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="kats.models.metalearner.html">kats.models.metalearner package</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="kats.models.metalearner.get_metadata.html">kats.models.metalearner.get_metadata module</a></li>
<li class="toctree-l3"><a class="reference internal" href="kats.models.metalearner.metalearner_hpt.html">kats.models.metalearner.metalearner_hpt module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">kats.models.metalearner.metalearner_modelselect module</a></li>
<li class="toctree-l3"><a class="reference internal" href="kats.models.metalearner.metalearner_predictability.html">kats.models.metalearner.metalearner_predictability module</a></li>
<li class="toctree-l3"><a class="reference internal" href="kats.models.metalearner.html#module-kats.models.metalearner">kats.models.metalearner module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.model.html">kats.models.model module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.nowcasting.html">kats.models.nowcasting package</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.prophet.html">kats.models.prophet module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.quadratic_model.html">kats.models.quadratic_model module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.reconciliation.html">kats.models.reconciliation package</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.sarima.html">kats.models.sarima module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.stlf.html">kats.models.stlf module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.theta.html">kats.models.theta module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.var.html">kats.models.var module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.models.html#module-kats.models">kats.models module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="kats.tsfeatures.html">kats.tsfeatures package</a></li>
<li class="toctree-l1"><a class="reference internal" href="kats.utils.html">kats.utils package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="kats.models.html">kats.models package</a><ul>
  <li><a href="kats.models.metalearner.html">kats.models.metalearner package</a><ul>
      <li>Previous: <a href="kats.models.metalearner.metalearner_hpt.html" title="previous chapter">kats.models.metalearner.metalearner_hpt module</a></li>
      <li>Next: <a href="kats.models.metalearner.metalearner_predictability.html" title="next chapter">kats.models.metalearner.metalearner_predictability module</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      
      
      
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/kats.models.metalearner.metalearner_modelselect.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>