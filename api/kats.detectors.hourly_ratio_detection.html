
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>kats.detectors.hourly_ratio_detection module &#8212; Kats 0.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="kats.detectors.outlier module" href="kats.detectors.outlier.html" />
    <link rel="prev" title="kats.detectors.detector_consts module" href="kats.detectors.detector_consts.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-kats.detectors.hourly_ratio_detection">
<span id="kats-detectors-hourly-ratio-detection-module"></span><h1>kats.detectors.hourly_ratio_detection module<a class="headerlink" href="#module-kats.detectors.hourly_ratio_detection" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="kats.detectors.hourly_ratio_detection.HourlyRatioDetector">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">kats.detectors.hourly_ratio_detection.</span></span><span class="sig-name descname"><span class="pre">HourlyRatioDetector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesData" title="kats.consts.TimeSeriesData"><span class="pre">kats.consts.TimeSeriesData</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span> </span><span class="pre">pandas._libs.tslibs.timedeltas.Timedelta</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregate</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/kats/detectors/hourly_ratio_detection.html#HourlyRatioDetector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.detectors.hourly_ratio_detection.HourlyRatioDetector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="kats.detectors.detector.html#kats.detectors.detector.Detector" title="kats.detectors.detector.Detector"><code class="xref py py-class docutils literal notranslate"><span class="pre">kats.detectors.detector.Detector</span></code></a></p>
<p>Hourly Ratio Anormaly detector.</p>
<p>This detector detects the abnormal intra-day hourly ratio patterns. This detector takes TimeSeriesDataas input and returns a list of TimeSeriesChangePoint representing the abnormal dates.
The detection algorithm assumes that the hourly ratio of each day should follow a multivariate normal distribution, and we utilize Mahalanobis distance tests to detect abnormal days.
This class provides detector and plot.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="kats.detectors.hourly_ratio_detection.HourlyRatioDetector.data">
<span class="sig-name descname"><span class="pre">data</span></span><a class="headerlink" href="#kats.detectors.hourly_ratio_detection.HourlyRatioDetector.data" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesData" title="kats.consts.TimeSeriesData"><code class="xref py py-class docutils literal notranslate"><span class="pre">kats.consts.TimeSeriesData</span></code></a> object representing the data to be examed, which should be of hour-level granularity.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kats.detectors.hourly_ratio_detection.HourlyRatioDetector.freq">
<span class="sig-name descname"><span class="pre">freq</span></span><a class="headerlink" href="#kats.detectors.hourly_ratio_detection.HourlyRatioDetector.freq" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional; A string or a <cite>pandas.Timedelta</cite> object representing the data frequency (following the naming conventions of pandas). Can be ‘H’ (hourly frequency), ‘T’ minutely frequency, ‘S’ secondly frequency or any other frequency finer than hourly frequency.
Default is None, in which case the frequency will be infered by infer_freq_robust.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="kats.detectors.hourly_ratio_detection.HourlyRatioDetector.aggregate">
<span class="sig-name descname"><span class="pre">aggregate</span></span><a class="headerlink" href="#kats.detectors.hourly_ratio_detection.HourlyRatioDetector.aggregate" title="Permalink to this definition">¶</a></dt>
<dd><p>Optional; A string representing the aggregation method for aggregating data to hourly level data. Can be ‘min’, ‘max’, ‘sum’, ‘mean’ or None. Default is None, which means no aggregation.</p>
</dd></dl>

<dl>
<dt>Sample Usage:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hr</span> <span class="o">=</span> <span class="n">HourlyRatioDetector</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">anomlies</span><span class="o">=</span><span class="n">hr</span><span class="o">.</span><span class="n">detector</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hr</span> <span class="o">=</span> <span class="n">hr</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">weekday</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="c1"># Plot the anomalies of weekday 3</span>
</pre></div>
</div>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="kats.detectors.hourly_ratio_detection.HourlyRatioDetector.detector">
<span class="sig-name descname"><span class="pre">detector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">support_fraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="kats.consts.html#kats.consts.TimeSeriesChangePoint" title="kats.consts.TimeSeriesChangePoint"><span class="pre">kats.consts.TimeSeriesChangePoint</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/kats/detectors/hourly_ratio_detection.html#HourlyRatioDetector.detector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.detectors.hourly_ratio_detection.HourlyRatioDetector.detector" title="Permalink to this definition">¶</a></dt>
<dd><p>Run detection algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>support_fraction</strong> – Optional; A float representing the support_fraction for MinCovDet class from scikit-learn. Default is 0.9.
See <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.covariance.MinCovDet.html">https://scikit-learn.org/stable/modules/generated/sklearn.covariance.MinCovDet.html</a> for more details.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of TimeSeriesChangePoint representing the anormal dates.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="kats.detectors.hourly_ratio_detection.HourlyRatioDetector.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weekday</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.9)"><span class="pre">int</span></a></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> &#x2192; <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.9)"><span class="pre">None</span></a><a class="reference internal" href="_modules/kats/detectors/hourly_ratio_detection.html#HourlyRatioDetector.plot"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#kats.detectors.hourly_ratio_detection.HourlyRatioDetector.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>plot the detection results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>weekday</strong> – Optional; An integer representing the weekday label, which should be in [0,6]. Default is 0.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Kats</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="kats.consts.html">kats.consts module</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="kats.detectors.html">kats.detectors package</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.bocpd.html">kats.detectors.bocpd module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.bocpd_model.html">kats.detectors.bocpd_model module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.changepoint_evaluator.html">kats.detectors.changepoint_evaluator module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.cusum_detection.html">kats.detectors.cusum_detection module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.cusum_model.html">kats.detectors.cusum_model module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.detector.html">kats.detectors.detector module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.detector_consts.html">kats.detectors.detector_consts module</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">kats.detectors.hourly_ratio_detection module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.outlier.html">kats.detectors.outlier module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.prophet_detector.html">kats.detectors.prophet_detector module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.residual_translation.html">kats.detectors.residual_translation module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.robust_stat_detection.html">kats.detectors.robust_stat_detection module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.seasonality.html">kats.detectors.seasonality module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.stat_sig_detector.html">kats.detectors.stat_sig_detector module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.trend_mk.html">kats.detectors.trend_mk module</a></li>
<li class="toctree-l2"><a class="reference internal" href="kats.detectors.html#module-kats.detectors">kats.detectors module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="kats.graphics.html">kats.graphics package</a></li>
<li class="toctree-l1"><a class="reference internal" href="kats.models.html">kats.models package</a></li>
<li class="toctree-l1"><a class="reference internal" href="kats.tsfeatures.html">kats.tsfeatures package</a></li>
<li class="toctree-l1"><a class="reference internal" href="kats.utils.html">kats.utils package</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="kats.detectors.html">kats.detectors package</a><ul>
      <li>Previous: <a href="kats.detectors.detector_consts.html" title="previous chapter">kats.detectors.detector_consts module</a></li>
      <li>Next: <a href="kats.detectors.outlier.html" title="next chapter">kats.detectors.outlier module</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      
      
      
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/kats.detectors.hourly_ratio_detection.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>